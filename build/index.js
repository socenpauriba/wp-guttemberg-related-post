(()=>{"use strict";const e=window.React,t=window.wp.blocks,o=window.wp.i18n,r=window.wp.hooks,n=window.wp.blockEditor,s=window.wp.components,l=window.wp.coreData,a=window.wp.element,c=window.wp.compose,i=({setAttributes:t,attributes:r})=>{const[i,u]=(0,a.useState)(""),{isResolving:p,records:d}=(0,l.useEntityRecords)("postType","post",{per_page:10,search:i}),w=(0,c.useDebounce)((e=>{u(e)}),300);return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.InspectorControls,null,(0,e.createElement)(s.PanelBody,null,(0,e.createElement)(s.ComboboxControl,{label:(0,o.__)("Search a post","single-post-query-loop-selector"),onChange:e=>{const o={attributes:r,query:{...r.query,include:[e],selectedPostId:e}};t(o)},onFilterValueChange:e=>{w(e)},options:p?[{label:(0,o.__)("Loading&hellip;","single-post-query-loop-selector"),value:"loading"}]:d?.map((e=>({label:e?.title?.rendered,value:String(e?.id)})))||[],value:r?.query?.selectedPostId||"loading"}))))},u="creativeandrew/single-post-query-loop-selector";(0,t.registerBlockVariation)("core/query",{name:u,title:(0,o.__)("Relacionada","single-post-query-loop-selector"),description:(0,o.__)("Destaca una notÃ­cia relacionada","single-post-query-loop-selector"),category:"theme",isActive:["namespace"],attributes:{namespace:u,query:{perPage:1,postType:"post",sticky:"exclude"},className:"post_destacat"},allowedControls:[],innerBlocks:[["core/post-template",{},[["core/columns",{style:{color:{background:"#f0f0f0"}}},[["core/column",{width:"25%",verticalAlignment:"center"},[["core/post-featured-image",{isLink:!0}]]],["core/column",{width:"75%"},[["core/post-title",{isLink:!0,level:4}]]]]]]]],scope:["inserter"]}),(0,r.addFilter)("editor.BlockEdit","core/query",(t=>o=>{if((e=>{const{attributes:{namespace:t}}=e;return t&&t===u})(o)){const{setAttributes:r,attributes:n}=o;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(i,{attributes:n,setAttributes:r}),(0,e.createElement)(t,{...o}))}return(0,e.createElement)(t,{...o})}))})();